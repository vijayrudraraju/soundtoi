<!DOCTYPE html>
<html>
  <head>
      <title>toimawb</title>
      <link rel="stylesheet" href="style/main.css" type="text/css">
  </head>
  <body>
      <canvas id="firstCanvas"></canvas>
      <!--<div id="account"></div>

      <h1>Generated CouchApp</h1>

      <div id="profile"></div>
      <div id="items"></div>

      <div id="sidebar">
          <p>Edit welcome message.</p>
          <p>Ideas: You could easily turn this into a photo sharing app, or a grocery list, or a chat room.</p>
      </div>-->
  </body>
  <script src="vendor/couchapp/loader.js"></script>
  <script type="text/javascript" charset="utf-8">
      var gP;

      /* global variables */

      var initialized = false;

      /* drawing constants */

      var screenWidth = 320;
      var screenHeight = 356;

      var controlSize = Math.round(screenWidth/2);

      var squareSize = Math.round(controlSize/2);
      var smallSquareSize = Math.round(squareSize/2);

      var circleSize = controlSize;
      var smallCircleSize = Math.round(circleSize/2);
      var smallestCircleSize = Math.round(smallCircleSize/2);

      /* drawing variables */

      var smallCirclePosition = 0; 
      var smallestCirclePosition = 0; 

      /* 4-tree data structure */
      function FourTree() {
        this.raw = {};
        this.raw[0] = {state:0};
        this.raw[1] = {state:0};
        this.raw[2] = {state:0};
        this.raw[3] = {state:0};

        this.position = [];

        this.set = function(localPosition, newState) {
            var pointer = this.raw;
            for(var i=0;i<this.position.length;i++) {
                pointer = pointer[this.position[i]];
            }
            pointer.state = newState;
        }
        this.get = function(localPosition) {
            var pointer = this.raw;
            for(var i=0;i<this.position.length;i++) {
                pointer = pointer[this.position[i]];
            }
        }
        this.descend = function(localPosition) {
            this.position.push(localPosition); 
        }
        this.ascend = function() {
            if(this.position.length > 0) {
                this.position.pop();
            } else {
                this.position = [];
                this.raw[0] = this.raw;
                this.raw[1] = {state:0};
                this.raw[2] = {state:0};
                this.raw[3] = {state:0};
            }
        }
      }

      $(document).ready(function() {
              gP = new Processing($('#firstCanvas')[0],innerLoop);
              gP.externals.sketch.options.globalKeyEvents = true;
              gP.externals.sketch.options.pauseOnBlur = true;
              });

function innerLoop(p) {
    function drawSquareControl() {
        p.noStroke();
        p.fill(80,80,80);

        p.rect(0,screenHeight-controlSize,
                controlSize,controlSize);
        p.rect(controlSize,screenHeight-controlSize,
                controlSize,controlSize);

        p.fill(160,160,160);
        p.rect(0,screenHeight-controlSize,
                squareSize,squareSize);
        p.fill(120,120,120);
        p.rect(squareSize,screenHeight-controlSize,
                squareSize,squareSize);
        p.fill(120,120,120);
        p.rect(0,screenHeight-controlSize+squareSize,
                squareSize,squareSize);
        p.fill(160,160,160);
        p.rect(squareSize,screenHeight-controlSize+squareSize,
                squareSize,squareSize);

        p.fill(220,220,220);
        p.rect(0,screenHeight-controlSize,
                smallSquareSize,smallSquareSize);
        p.fill(200,200,200);
        p.rect(smallSquareSize,screenHeight-controlSize,
                smallSquareSize,smallSquareSize);
        p.fill(200,200,200);
        p.rect(0,screenHeight-controlSize+smallSquareSize,
                smallSquareSize,smallSquareSize);
        p.fill(220,220,220);
        p.rect(smallSquareSize,screenHeight-controlSize+smallSquareSize,
                smallSquareSize,smallSquareSize);
    }
    function drawCircleControl() {
        var smallCircleCorrY = Math.sin(2*Math.PI/360*smallCirclePosition)*smallCircleSize/2;
        var smallCircleCorrX = Math.cos(2*Math.PI/360*smallCirclePosition)*smallCircleSize/2;
        var smallestCircleCorrY = Math.sin(2*Math.PI/360*smallestCirclePosition)*smallestCircleSize/2;
        var smallestCircleCorrX = Math.cos(2*Math.PI/360*smallestCirclePosition)*smallestCircleSize/2;

        p.fill(120,0,0)
        p.ellipse(controlSize+smallCircleSize,screenHeight-smallCircleSize,
                circleSize,circleSize);
        p.fill(190,0,0)
        p.ellipse(controlSize+smallCircleSize+smallCircleCorrX,screenHeight-smallCircleSize+smallCircleCorrY,
                smallCircleSize,smallCircleSize);
        p.fill(255,0,0)
        p.ellipse(controlSize+smallCircleSize+smallCircleCorrX+smallestCircleCorrX,screenHeight-smallCircleSize+smallCircleCorrY+smallestCircleCorrY,
                smallestCircleSize,smallestCircleSize);

        smallCirclePosition++;
        smallestCirclePosition += 2;
    }
    p.draw = function() {
        drawSquareControl();
        drawCircleControl();
        /*
        if(!initialized) {
            initialized = true;
            p.noLoop();
        }
        */
    };
    p.setup = function() {
        //p.println(p.PFont.list());
        p.size(screenWidth,screenHeight);
        var font = p.loadFont("monospace");
        p.textFont(font);
        p.background(0);
	};
}
      /*
      $.couch.app(function(app) {
      $("#account").evently("account", app);
      $("#profile").evently("profile", app);
      $.evently.connect("#account","#profile", ["loggedIn","loggedOut"]);
      $("#items").evently("items", app);
      });
      */
  </script>
</html>
